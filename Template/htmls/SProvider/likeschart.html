{% extends 'SProvider/design1.html' %}
{% block researchblock %}

<style>
    .chart-container {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        backdrop-filter: blur(10px);
        margin-bottom: 20px;
    }
    
    .chart-header {
        text-align: center;
        margin-bottom: 30px;
    }
    
    .chart-header h2 {
        color: #333;
        font-size: 2em;
        font-weight: 700;
        margin-bottom: 10px;
        background: linear-gradient(45deg, #667eea, #764ba2);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    .chart-header p {
        color: #666;
        font-size: 1.1em;
    }
    
    .chart-controls {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 30px;
        box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        text-align: center;
    }
    
    .chart-buttons {
        display: flex;
        justify-content: center;
        gap: 15px;
        flex-wrap: wrap;
    }
    
    .chart-btn {
        background: linear-gradient(45deg, #667eea, #764ba2);
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 25px;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    .chart-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        background: linear-gradient(45deg, #764ba2, #667eea);
    }
    
    .chart-btn.active {
        background: linear-gradient(45deg, #ff6b6b, #ee5a24);
    }
    
    #chartContainer {
        background: white;
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        min-height: 500px;
        position: relative;
    }
    
    .stats-summary {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        padding: 20px;
        margin-top: 20px;
        box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    }
    
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 15px;
    }
    
    .stat-item {
        text-align: center;
        padding: 15px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    .stat-value {
        font-size: 2em;
        font-weight: bold;
        margin-bottom: 5px;
    }
    
    .stat-label {
        font-size: 0.9em;
        opacity: 0.9;
    }
    
    .no-data {
        text-align: center;
        padding: 60px;
        color: #666;
        font-size: 1.2em;
    }
    
    .no-data i {
        font-size: 3em;
        margin-bottom: 20px;
        color: #ccc;
    }
</style>

<div class="chart-container">
    <div class="chart-header">
        <h2><i class="fas fa-chart-bar"></i> Model Accuracy Analysis</h2>
        <p>Interactive visualization of machine learning model performance</p>
    </div>
    
    <div class="chart-controls">
        <h3 style="color: #333; margin-bottom: 20px;">ðŸ“Š Chart Type Selection</h3>
        <div class="chart-buttons">
            <a href="{% url 'likeschart' 'bar' %}" class="chart-btn {% if like_chart == 'bar' %}active{% endif %}">
                <i class="fas fa-chart-bar"></i> Bar Chart
            </a>
            <a href="{% url 'likeschart' 'column' %}" class="chart-btn {% if like_chart == 'column' %}active{% endif %}">
                <i class="fas fa-chart-column"></i> Column Chart
            </a>
            <a href="{% url 'likeschart' 'line' %}" class="chart-btn {% if like_chart == 'line' %}active{% endif %}">
                <i class="fas fa-chart-line"></i> Line Chart
            </a>
            <a href="{% url 'likeschart' 'area' %}" class="chart-btn {% if like_chart == 'area' %}active{% endif %}">
                <i class="fas fa-chart-area"></i> Area Chart
            </a>
        </div>
    </div>
    
    {% if form %}
    <div id="chartContainer"></div>
    
    <div class="stats-summary">
        <h3 style="text-align: center; color: #333; margin-bottom: 20px;">ðŸ“‹ Model Performance Summary</h3>
        <div class="stats-grid">
            {% for o in form %}
            <div class="stat-item">
                <div class="stat-value">{{o.dcount|floatformat:1}}%</div>
                <div class="stat-label">{{o.names}}</div>
            </div>
            {% endfor %}
        </div>
    </div>
    
    {% else %}
    <div class="no-data">
        <i class="fas fa-chart-bar"></i>
        <h3>No Data Available</h3>
        <p>Please train the models first to see accuracy data.</p>
        <p>Go to "Train Models" to generate performance data.</p>
    </div>
    {% endif %}
</div>

{% if form %}
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
<script>
window.onload = function() {
    var chart = new CanvasJS.Chart("chartContainer", {
        animationEnabled: true,
        animationDuration: 2000,
        title: {
            text: "Machine Learning Model Accuracy Comparison",
            fontSize: 24,
            fontFamily: "Inter",
            fontWeight: "bold",
            fontColor: "#333"
        },
        subtitles: [{
            text: "Performance Analysis of Cardiac Arrest Detection Models",
            fontSize: 16,
            fontColor: "#666"
        }],
        axisX: {
            title: "Model Types",
            titleFontSize: 16,
            titleFontFamily: "Inter",
            titleFontColor: "#333",
            labelFontSize: 12,
            labelFontFamily: "Inter",
            labelFontColor: "#666"
        },
        axisY: {
            title: "Accuracy (%)",
            titleFontSize: 16,
            titleFontFamily: "Inter",
            titleFontColor: "#333",
            labelFontSize: 12,
            labelFontFamily: "Inter",
            labelFontColor: "#666",
            maximum: 100,
            minimum: 0,
            interval: 10
        },
        legend: {
            cursor: "pointer",
            itemclick: function (e) {
                if (typeof (e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
                    e.dataSeries.visible = false;
                } else {
                    e.dataSeries.visible = true;
                }
                chart.render();
            },
            fontSize: 14,
            fontFamily: "Inter"
        },
        data: [{
            {% if like_chart == "bar" %}
            type: "bar",
            {% elif like_chart == "column" %}
            type: "column",
            {% elif like_chart == "line" %}
            type: "line",
            {% elif like_chart == "area" %}
            type: "area",
            {% else %}
            type: "bar",
            {% endif %}
            color: "linear-gradient(45deg, #667eea, #764ba2)",
            indexLabel: "{y}%",
            indexLabelFontSize: 14,
            indexLabelFontFamily: "Inter",
            indexLabelFontColor: "white",
            indexLabelFontWeight: "bold",
            indexLabelPlacement: "outside",
            dataPoints: [
                {% for o in form %}
                {
                    y: {{o.dcount}}, 
                    label: "{{o.names}}",
                    color: "{% cycle '#667eea' '#764ba2' '#f093fb' '#f5576c' '#4facfe' %}"
                },
                {% endfor %}
            ]
        }]
    });
    
    chart.render();
    
    // Add smooth animations
    setTimeout(function() {
        chart.options.animationEnabled = false;
    }, 2000);
    
    // Add hover effects
    chart.options.data[0].mouseover = function(e) {
        e.dataPoint.color = "#ff6b6b";
        chart.render();
    };
    
    chart.options.data[0].mouseout = function(e) {
        e.dataPoint.color = "{% cycle '#667eea' '#764ba2' '#f093fb' '#f5576c' '#4facfe' %}";
        chart.render();
    };
}
</script>
{% endif %}

{% endblock %}